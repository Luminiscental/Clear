
// TODO: Actual tests !!!

val pi = 3.14159265358979;
func meth() void {
    print "original";
}

var callback = meth;

// func print_callback() void {
//     print "callback:";
//     print callback;
// }

// print_callback();

print "callback before:";
callback();

{
    struct LocalStruct {
        func meth() void {
            print "pi = " + str(pi);
        }
    }

    val a = LocalStruct();
    //a.meth();
    callback = a.meth;
}

// print_callback();

print "callback after:";
callback();

