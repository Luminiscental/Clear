
struct Context {
    func() void callback;

    func do_stuff() void {
        val message := "Doing stuff";
        func inner(str context) void {
            print context + ": " + message;
        }
        if (true) {
            val context, _ := "func", 2;
            inner(context);
        }
    }

    val class_name := "Context";
}

func print_(str msg) void {
    print msg;
}

val c := Context { callback=func() print_("called") };
c.callback();
c.do_stuff();
print c.class_name;
